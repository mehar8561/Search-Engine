Legacy extended IRIs XML resource identification Legacy extended IRIs XML resource identification W3C Working Group Note November comment style corrected place version: Latest version: Previous version: Editors: Henry S. Thompson, University Edinburgh Richard Tobin, University Edinburgh Norman Walsh, Mark Logic Corporation document also available non-normative formats: XML. Copyright W3C® ERCIM, Keio), Rights Reserved. W3C liability, trademark document use rules apply. Abstract historic reasons, formats have allowed variants IRIs are somewhat less restricted syntax, example XML system identifiersand W3C XML Schema anyURIs. document definition name Extended IRI LEIRI) variants easy reference. variants have be used care; require further processing before being fully interchangeable as IRIs. New protocols formats not use Legacy Extended IRIs. Status Document section status document time publication. Other documents supersede document. list current W3C publications latest revision technical report be found W3C technical reports index document W3C Working Group Note. been developedby XML Core Working Group, part XML Activity W3C Ubiquitous Web Domain. Publication as Working Group Note not imply endorsement bythe W3C Membership. draft document be updated,replaced obsoleted other documents time. isinappropriate cite document as other work inprogress. send comments about document xml-editor@w3.org(archived). document very closely based material specifically section IRI References IRIs" andsection Extended IRIs", included here permission itsauthors. intended provide basis singlenormative reference many XML- HTML-related standards advance ofthe final publication as RFC. publication specification reference place extracts given below. document was produced group operating February W3C Patent Policy. W3C public list patent disclosures made connection deliverables group; page also instructions disclosing patent. individual actual knowledge patent individual Essential Claim(s) disclose information accordance section W3C Patent Policy. Table Contents Introduction Notation Legacy Extended IRI Syntax Conversion Legacy Extended IRIs IRIs Characters allowed Legacy Extended IRIs not IRIs Appendix References Introduction historic reasons, formats have allowed variants IRIs are somewhat less restricted syntax, example XML system identifiersand W3C XML Schema anyURIs. document definition name Extended IRI LEIRI) variants easier reference. variants have be used care; require further processing before being fully interchangeable as IRIs. New protocols formats not use LegacyExtended IRIs. provisions document also apply Legacy Extended IRI references. Notation document, characters are referenced using prefix followed hexadecimal digits. document, key words not, required, not, not, recommended, optional are be interpreted as described Legacy Extended IRI Syntax syntax Legacy Extended IRIs LEIRI references isthe same as IRIs IRI references thatucschar redefined. syntax ABNF described Character numbers are taken UCS, implying actual binary encoding. Terminals ABNF are characters, not bytes. consistency IRIs,generic LEIRI software not checkLEIRIs conformance syntax. productions are ambiguous. algorithm details, Productions changed RFC3986 LEIRI scheme ihier-part iquery ifragment ihier-part iauthority ipath-abempty ipath-absolute ipath-rootless ipath-empty LEIRI-reference LEIRI irelative-ref absolute-LEIRI scheme ihier-part iquery irelative-ref irelative-part iquery ifragment irelative-part iauthority ipath-abempty ipath-absolute ipath-noscheme ipath-empty iauthority iuserinfo ihost port iuserinfo iunreserved pct-encoded sub-delims ihost IP-literal IPv4address ireg-name ireg-name iunreserved pct-encoded sub-delims ipath ipath-abempty empty ipath-absolute not ipath-noscheme non-colon segment ipath-rootless segment ipath-empty characters ipath-abempty isegment ipath-absolute isegment-nz isegment ipath-noscheme isegment-nz-nc isegment ipath-rootless isegment-nz isegment ipath-empty isegment isegment-nz isegment-nz-nc iunreserved pct-encoded sub-delims non-zero-length segment colon ipchar iunreserved pct-encoded sub-delims iquery ipchar iprivate ifragment ipchar iunreserved ALPHA DIGIT ucschar iprivate %xE000-F8FF %xE0000-E0FFF %xF0000-FFFFD %x100000-10FFFD Productions unchanged RFC3986 scheme ALPHA ALPHA DIGIT port IP-literal IPv6address IPvFuture IPvFuture unreserved sub-delims IPv6address h16 h16 h16 h16 h16 h16 h16 h16 h16 h16 h16 h16 h16 h16 h16 h16 h16 h16 h16 h16 h16 h16":" h16 IPv4address IPv4address dec-octet dec-octet dec-octet dec-octet dec-octet DIGIT %x31-39 DIGIT 2DIGIT %x30-34 DIGIT %x30-35 pct-encoded HEXDIG HEXDIG unreserved ALPHA DIGIT reserved gen-delims sub-delims gen-delims sub-delims Modified ucschar production ucschar %x0-1F %x7F-D7FF %xE000-FFFD %x10000-10FFFF restriction bidirectional formatting characters inSection lifted. iprivate production redundant. Formats use Legacy Extended IRIs further restrict characters allowed therein, either implicitly fact format as such not allow characters, explicitly. example character not allowed implicitly be NUL character However, characters allowed IRIs still be allowed. Conversion Legacy Extended IRIs IRIs convert Legacy Extended IRI IRI character allowed Legacy Extended IRI not allowed IRI Characters allowed Legacy Extended IRIs not IRIs) be percent-encoded applying following steps: Convert character sequence more octets using UTF-8 Convert octet %HH, HH hexadecimal notationof octet value. Note identical percent-encodingmechanism Section reduce variability,the hexadecimal notation use uppercase letters. Replace original character resulting character sequence sequence %HH triplets). Conversion LEIRI IRI URI be performed only absolutely necessary as late as possible processing chain. particular, process converting relative LEIRI absolute process passing LEIRI process software component responsible dereferencing trigger percent-encoding. Characters allowed Legacy Extended IRIs not IRIs section list groups characters code points are allowed Legacy Extedend IRIs are not allowed IRIs are allowed IRIs only query part. group characters, advice usage characters also given, concentrating reasons not use Space formats applications use space as delimiter, example, foritems list. Appendix C also thatwhite space have be added displaying printing long URIs; thesame long IRIs. means spaces disappear makethe Legacy Extended IRI be interpreted as more separate IRIs. Delimiters Appendix C use ofdouble-quotes angle brackets(<http://example.com/>) as delimiters URIs plain text.These conventions are often used also apply IRIs. Legacy Extended IRIsusing characters be cut off wrong place. Unwise characters characters originally have been excluded URIs because respective codepoints are assigned different graphic characters encoding. move Unicode, characters are still occasionally displayed differently systems, example, U+005C as Japanese Yen symbol. Also, fact characters are not used URIs IRIs encouraged use outside URIs IRIs contexts include URIs IRIs. case Legacy Extended IRI such character used such context, Legacy Extended IRI be interpreted piecemeal. controls controls, DEL C1 controls, U+0000 U+001F U+007F U+009F) There way transmit characters reliably potentially electronic form. Even electronic form, software components silently filter out characters stop processing alltogether encountering characters affect text display subtle, unnoticable ways drastic, global irreversible ways depending hardware software involved. use characters allow malicious users manipulate display Legacy Extended IRI context. Bidi formatting characters U+200F, U+202A-202E) characters affect display ordering characters. Displayed Legacy Extended IRIs containing characters be converted back electronic form order) unambiguously. characters allow malicious users manipulate display Legacy Extended IRI context. Specials code points provide functionality useful Legacy Extended IRI, example byte order identification, annotation replacements unknown characters objects. use interpretation Legacy Extended IRI purpose lead confusing display variations. Private use code points U+F0000-FFFFD, U+100000- 10FFFD) Display interpretation code points definition undefined private agreement. Therefore, code points are not suited use Internet. are not interoperable have unpredictable effects. Tags characters provide way include language tags Unicode plain text. are not appropriate Legacy Extended IRIs because language information identifiers reliably be input, transmitted example, visual medium such as paper), recognized. Non-characters U+1FFFE-1FFFF, U+2FFFE-2FFFF, U+3FFFE-3FFFF, U+4FFFE-4FFFF, U+5FFFE-5FFFF, U+6FFFE-6FFFF, U+7FFFE-7FFFF, U+8FFFE-8FFFF, U+9FFFE-9FFFF, U+AFFFE-AFFFF, U+BFFFE-BFFFF, U+CFFFE-CFFFF, U+DFFFE-DFFFF, U+EFFFE-EFFFF, U+FFFFE-FFFFF, U+10FFFE-10FFFF) code points are defined as non-characters. Applications use internally, are not prepared interchange reference, here also list code points code units not even allowed Legacy Extended IRIs: Surrogate code units do not represent Unicode codepoints. References RFC2119 Bradner, S., Key words use RFCs Indicate Requirement Levels, BCP RFC IETF, March Available online as RFC5234 Crocker, D. P. Overell, Eds, Augmented BNF Syntax Specifications: ABNF, RFC IETF, January Available online as RFC3629 Yergeau, F., UTF-8, transformation format ISO STD RFC IETF November Availableonline as RFC3986 Berners-Lee, T., R. Fielding L. Masinter, Uniform Resource Identifier Generic Syntax, STD RFC IETF, January Available online as RFC3987 Internationalized Resource Identifiers(IRIs), RFC3987, Dürst, M. M. Suignard, eds. IETF,2005. Available online as IRI-bis Internationalized Resource Identifiers(IRIs), draft-duerst-iri-bis-04, Dürst, M. M. Suignard, eds. IETF,2008. Available online as 