CC/PP Implementors Guide: Privacy Protocols CC/PP Implementors Guide: Privacy Protocols W3C Working Draft December Version: Latest Version: Previous Version: None Editors: Hidetaka Ohto W3C/Panasonic Lalitha Suryanarayana SBC Johan Hjelm johan.hjelm@nrj.ericsson.se>, Ericsson Research Japan Copyright W3CÂ® INRIA, Keio), Rights Reserved. W3C liability,trademark,documentuse softwarelicensing rules apply. Abstract document implementors advice protect privacy CC/PP user, be applied using P3P HTTP CC/PP Exchange protocol. Status document section status document time itspublication. Other documents supersede document. lateststatus document series maintained W3C. document very preliminary public Working Draft madeavailable World Wide Web Consortium discussiononly. intended become W3C Note. noendorsement content. work progress, be updated,replaced, obsoleted other documents time. list current W3C working drafts be found document produced CC/PP working group only) Device Independence activity). working group welcomes feedback discussion,preferably public mailing list www-mobile@w3.org, althoughcomments also be sent authors.Public comments responses be accessed athttp://lists.w3.org/Archives/Public/www-mobile/. Table Contents Not included version. Introduction CC/PP data not personal, i.e. tied named user, since there are number ways user be identified as holder profile, e.g. identity transmision HTTP parameters, recognition IP-number such, there need suggested privacy method implementors. Descriptions single features description terminal users preferences terminal be used be used infringe users privacy. However, profile collection such properties, be used personalize information; closer personalization, bigger risk user be identified specific use terminal; bigger risk misuse privacy standpoint. There also possible risk user be identified as having certain abilities constantly requests text double-sized fonts, likely hard seeing), be possible misuse. Generally speaking, user not want share data CC/PP profile, wish have control over information Origin servers customizing content therefore express user user agent regarding privacy practices regard use CC/PP data, so user make decision not share data server. P3P way origin server express privacy policy user terminal. match P3P CC/PP not perfect, intent implementation are different, be used together enhance privacy protection user. CC/PP abbreviation Capability/Preference Profiles", extensible format based RDF describing device capabilities user preferences. general, user preferences device capabilities need be protected malicious use there trust management framework CC/PP so far. trust management, sensitive information attacks malicious servers content providers. do not aim create new technologies terms network security, authentication, message validation, personal privacy protection, cryptography. intend employ existing technologies terms trust management considering apply such technologies fit use cases CC/PP. Scope document document discussion document, containing implementation advice developers services based CC/PP. interactions CC/PP P3P given current state implementations. However, since CC/PP only data structure not protocol, work be taken as future input formal specification, currently be seen as advice implementors only. Protocol transport issues. There currently, CC/PP protocol. There are number proposals, various reasons, group not chartered develop protocol. do so as soon as possible, require rechartering. Meanwhile, there are proposals: CC/PP Exchange Protocol, W-HTTP protocol. Note be possible use header Mark Baker reference CC/PP profile mechanism been demonstrated Kiniko Yasuda Keio University). There are main ways transporting CC/PP over HTTP: Using CC/PP Exchange Protocol, using UAProf W-HTTP Protocol. CC/PP Exchange Protocol CC/PP Exchange Protocol was presented as W3C Note June uses HTTP Extension Framework intent was provide framework was possible map HTTP headers, handle defaults as URIs. idea was minimize data transfer over air, goal was accomplished, as been demonstrated Kiniko Yasuda Keio University. CCPP-ex uses headers, defaults updates are separated using MD5 hashes. third header warning information. protocol documented W3C Note exchange protocol based HTTP Extension Framework". CC/PP framework mechanism describing capabilities preferences associated users user agents accessing World Wide Web. Information about user agents hardware platform, system software, applications user preferences. user agent capabilities preferences be thought as metadata, properties descriptions user agent's hardware software. CC/PP descriptions are intended provide information necessary adapt content content delivery mechanisms best fit capabilities preferences user agents. major disadvantage format verbose. networks are very slow be moderately expensive way handle metadata. There are several optimizations possible help deal network performance issues. strategy use compressed form XML, complementary strategy use references Instead enumerating set attributes, reference be used name collection attributes such as hardware platform defaults. advantage enabling separate fetching caching functional subsets. problem propagate changes current CC/PP descriptions origin server, gateway proxy. solution transmit entire CC/PP descriptions change. not ideal slow networks. alternative send only changes. CC/PP exchange protocol not depend profile format Therefore profile format besides CC/PP description format be applied CC/PP exchange protocol. example, user agent issues request URIs address profile information, user agent changes value attribute, such as turning sound off, only change sent together URIs. origin server request, origin server inquires CC/PP repositories CC/PP descriptions using list URIs. Then origin server tailored content using fully enumerated CC/PP descriptions. origin server not obtain fully enumerated CC/PP descriptions CC/PP repositories not available. case, implementation origin server respond request tailored content, non-tailored content error. case, origin server inform user agent fact. warning mechanism been introduced purpose. likely origin server, gateway proxy be concerned different device capabilities user preferences. example, origin server have responsibility select content according users preferred language, proxy have responsibility transform encoding format content. Therefore gateways proxies not forward profile information origin server. CC/PP exchange protocol convey natural language codes header field-values. Therefore internationalization issues be considered. internationalization policy CC/PP exchange protocol based RFC2277. Considering maintain session RTSP worthwhile point view minimizing transactions session mechanism permit client avoid resending elements CC/PP descriptions have not changed since last time information was transmitted). However session mechanism reduce cache efficiency, maintaining states user agent origin server. extension declaration used indicate extension been applied message possibly reserve part header namespace identified header field prefix. HTTP Extension Framework types extension declaration strength: mandatory optional, types extension declaration scope: hop-by-hop end-to-end. type extension declaration strengths type extension declaration scopes be used user agent needs do. strength extension declaration be mandatory user agent needs obtain error response server(an origin server, gateway proxy) not comply CC/PP exchange protocol. strength extension declaration be optional user agent needs obtain non-tailored content server not comply CC/PP exchange protocol. scope extension declaration be hop-by-hop user agent priori knowledge first hop proxy complies CC/PP exchange protocol. scope extension declaration be end-to-end user agent priori knowledge first hop proxy not comply CC/PP exchange protocol, user agent not use proxy. Profile header field request-header field, list references address CC/PP descriptions. grammar Profile header field as Header field Grammar Profile profile-field-name profile-field-name reference absoluteURI profile-diff-name profile-diff-name profile-diff-number profile-diff-digest profile-diff-number profile-diff-digest sp; MD5 message digest encoded base64 DIGIT US-ASCII digit Profile header field-value list references. reference Profile header field corresponding entity CC/PP description. reference either absolute URI profile-diff-name. entity CC/PP description represented absoluteURI outside request, entity CC/PP description represented profile-diff-name exisits inside request Profile-Diff header field. profile-diff-name Profile header field addresses CC/PP description corresponding Profile-Diff header same request. Profile header field profile-diff-name, corresponding Profile-Diff header be included same request. main reason profile-diff-name introduced specify priority CC/PP description Profile header field-value. priority indicated order references absoluteURI profile-diff-name) Profile header field-value. latest reference Profile header field-value highest priority. Therefore CC/PP description represented latest reference override CC/PP descriptions are represented precedent references. default behavior absence schema rules. profile information be represented absoluteURIs Profile header. case, Profile-Diff header field not have be added request. other hand, only Profile-Diff header contain profile information. case, Profile header only profile-diff-name Profile-Diff header. W-HTTP WAP Forum UAProf group defined transport CC/PP over W-HTTP Profiled HTTP). be found section UAProf specification. case mobile terminal supports wireless profiled HTTP profile transported using meta data defined bythis specification. CC/PP Framework unaltered. defined mechanism functional equivalent CC/PP exchange protocol definition syntax semantics transport specification. Using W-HTTP transport CC/PP following extension headers are defined transport CC/PP W-HTTP. defined extension headers are considered be end end headers.. X-WAP-PROFILE x-wap-profile header general header field contain following URI referencing CC/PP profile, reference profile difference, transported using x-wap-profile-diff combination multiple instances types data. data MAY be generated mobile terminal attached intermediary point request origin server. case Push header MAY be generated as response request. case Push data be cached. However header be present request response UAProf used. x-wap-profile header MAY contain references instances x-wap-profile-diff header following section reference parts, sequence number profile-digest. sequence number used determine order x-wap-profile-diff headers be applied digest used validate profile-desc x-wap-profile-diff header value correct. X-WAP-PROFILE-DIFF x-wap-profile-diff header general header MAY be generated mobile terminal intermediate proxy enhance alter CPI. There be multiple profile differences, profile difference also have reference x-wap-profile header order differences be applied. header parts, sequence identifier entity part CC/PP description being enhanced. header MAY be present request response. case Push data be cached. X-WAP-PROFILE-WARNING x-wap-profile-warning header general header. Essentially, same as X-WAP-PROFILE-WARNING header CC/PP Exchange Protocol. presence level response been tailored relation profile data been supplied request. header MAY be present request response. warning codes are defined fall following categories reserved reserved content been adapted depending profile server incapable processing CPI. x-wap-profile-warning have following values. 200Not applied value be included content not been tailored, sent representation, only representation available server. 201Content selection applied be included included content been selected representations available. Content generation applied be included content been tailored generated as result applying included profile. Transformation applied be added intermediate proxy transformation changing content-coding based CPI data. 500Not Supported entity sending warning code not support UAProf. Protocol Procedures Over Air transport variant headers values are not compressed over air transmission. recommended hardware software manufacturer only use x-wap-profile header indicate absoluteURI as reference CPI mobile terminal transmitted over air. However specification not preclude use x-wap-profile-diff case. Combining X-WAP-Profile X-WAP-Profile-Diff x-wap-profile-diff header included profile-diff-seq match sequence number x-wap-profile header otherwise associated profile-diff-desc NOT be processed. reference x-wap-profile-diff header parts, sequence number order x-wap-profile-diff headers are processed MD5 message digest used validate profile-desc contained x-wap-profile-diff. either sequence MD5 validation do not match, particular profile-diff be ignored. x-wap-profile-diff header added intermediate proxy, NOT alter existing sequence x-wap-profile-diff headers, proxy append using next available sequence number numeric order. digest associated x-wap-profile-diff be generated applying MD5 message digest algorithm base64 algorithm, section MIME specification corresponding profile-desc part header field-value. MD5 algorithm as input message arbitrary length as output digest" input. base64 algorithm as input arbitrary binary data as output printable encoding data input. Relationship HTTP Headers profile information referred x-wap-profile x-wap-profile-diff header not supersede HTTP request response header information. Caching x-wap-profile-warning header NOT be used cache control purposes. server wishes indicate caching dependency based theseheaders then hit use Vary header as defined section14.44 HTTP specification XML Protocol/SOAP CC/PP be transported handled XML Protocol/SOAP not clear. something working group wishes investigate further. Other protocols WAP Forum provided mapping headers WSP, Wireless Session Protocol WAP UAPROF specification). Work also ongoing 3GPP transport CC/PP over RSVP. Cases HTTP use case CC/PP intended be protocol neutral, work protocol transport Mappings have been produced other protocols, most notably WSP. However, be expected be implemented HTTP, using HTTP headers as transport. working group also look transport CC/PP over SOAP/XML Protocol as future work item. Trust mechanisms Policy publishing not bring trust Trust be obtained other ways, before even worth trouble publish policy. context, P3P rather be seen as means retrieve user's consent data storage processing. client retrieve policy declaration server, match preferences client. However, P3P not defined other protocols HTTP. other mechanisms exist, knowledge, communicate policies client server. Note, however, known problem P3P nothing enforce policy assumed take place out band. Using P3P HTTP document CC/PP exchange protocol based HTTP Extension Framework mechanism transport CC/PP over HTTP described. document interaction take place, given P3P interaction as policy be exchanged, client request server. not proxy trusted domain, client expose profile possibly malicious party CC/PP Exchange Protocol used, since profile sent entirety first GET request. Thus, malicious server take profile do anything wanted since relationship been established. solution transmit minimal profile as part first request, as described policy been received approved, full profile sent profile-diff). Note policy rejected, there currently way server maintain state over users requests, there way server recognize client not approve policy, since there fallback method P3P. Note possible profile declared be null profile content), correct profile be transferred as diff approval servers policy. Note also state management mechanism server currently not specified. be possible use cookies ramifications discussion lead too far. interaction P3P have levels granularity: privacy policy CC/PP vocabulary statement stating data profile profile diff headers not be retained misused, be used only purposes content customization] policy specifically states attributes elements) CC/PP vocabulary collected state purpose. be extended later date include negotiation capabilities currently out scope P3P1.0) alternately, user agent be smart enough parse elements out send only attributes indicated policy) profile profile diff headers following acceptable site's policy. P3P CC/PPvocabularies P3P vocabulary defined XML. CC/PP vocabularies are defined RDF XML encoding RDF). P3P specification RDF encoding be made available; P3P elements be used inside CC/PP profiles vice versa). further information mixing namespaces profiles, effort been advertised, CC/PP working group decided not create mapping own, await P3P working group efforts. alternative solution create CC/PP data schema P3P syntax, seem redundant RDF version P3P forthcoming. working groups continue investigate Safe Zone P3P specification concept zone". concept not exist priori CC/PP, since protocol been defined. However, PIMI method as described section be used provide safe zone way indicated P3P specification, section noted above, empty profile be used negotiating safe zone, instead minimal APPEL rules language defined CC/PP. Existing implementations make use XSLT predicate transformations Xpath, profile documents be addressed style sheet). future, foreseen there be need more extensive rule system, such decisions concern not just formatting, content as regard, synergies APPEL rules language P3P be investigated. Use trusted intermediaries CC/PP Exchange protocol, profiles be referenced retrieved intermediary gateway other proxy). also possible entity handle P3P negotiations, mechanism delegate authority existed, end-to-end security was not required. occur situations user trusted domain, interfaced Internet proxy gateway. case, P3P negotiation be terminated proxy. also be necessary proxy not just keep cache documents, maintain database user state. even be necessary proxy become entity not just transcoding, also personalization behalf origin server. advantage user be personal information including CC/PP profile stays trusted proxy. advantage origin server owner harder identify, since version document be delivered have be there not be record number retrievals, retrieved etc conversely, be seen as privacy enhancement user). type system emerge, e.g. scope IETF WEBI APEX working groups, foresee issue become more important. However, since mechanism transparent HTTP, since be CC/PP, not discuss further extent here. Examples Using P3P CC/PP Exchange Protocol using thePIMI method idea behind PIMI method client defined minimal profile non-contentious information be used infringe privacy client). minimal profile used initial request get privacy policy server. demonstrated below, using profile-diff headers CC/PP Exchange protocol, possible client signal satisfaction dissatisfaction policy returning profile difference not. response empty diff, server provide document not contain adaption have been done using information client not reveal. profile" most likely subjective. Ultimately, user have determine information give out. However, purposes discussion, assume properties enable generic display data input device, expressing preferences modifications, constitute minimum. imply following, using properties defined WAP UAProf drafting committee: Screen size Color capable document, propose empty diff be sent as response second GET), imply profile not changed. Depending implementation, server return document containing different information set user have got had accepted policy; returned nothing. not specified P3P specification, out scope CC/PP work. apply client initially contacted server session. rest session, be able refer policy first retrieved, follow-up policies be added later session LINK tag HTTP, using well-known location, HTTP header). interactions look as Client request minimal profile server. request be directed well-known location P3P reference file, also be directed location, been indicated LINK tag document references server. reference file returned. request retrieve policy file. Server returns policy. Client policy matches own rule set Client policy, diff full information GET full information directed URI document policy was retrieved well-known LINK-ed location). Client document Client policy, resends request empty diff Client less important document. protocol interactions, look as Client request minimal profile server. GET HTTP/1.1 Host: Opt: ns=19 Accept: Accept-Language: de, en Server returns policy. HTTP/1.1 P3P: policyref="http://catalog.example.com/P3P/PolicyReferences.xml" Content-Type: text/html Content-Length: Server: CC-Galaxy/1.3.18 Client policy matches own rule set shown) Client policy, diff full information GET HTTP/1.1 Host: Opt:"http://www.w3.org/TR/NOTE-CCPPexchange" ns=19 version="1.0"?> xmlns="http://www.w3.org/TR/PR-rdf-syntax" xmlns:PRF="http://www.example.org/TR/WD-profile-vocabulary#"> ID="SoftwarePlatform" PRF:Sound="On" Client document shown) Client policy, resends request empty diff GET HTTP/1.1 Host: Opt:"http://www.w3.org/TR/NOTE-CCPPexchange" ns=19 Client less important document shown) References HTTP Extension Framework HTTP/1.1, Rev6 Composite Capability/Preference Profiles user side framework content negotiation Resource Description Framework, Model Syntax Specification Resource Description Framework Schema Specification Platform Privacy Preferences P3P Project RFC Uniform Resource Identifiers Generic Syntax CC/PP exchange protocol based HTTP Extension Framework Privacy Enhancements Mobile Internet, Mikael Nilsson, Helena Lindskog, Simone Fischer-Huebner, Karlstad University.(PDF format) W3C Note, CC/PP Implementers GuideHarmonization Existing Vocabularies Content Transformation Heuristics, be appeared. Appendix Basic requirements trust management frameworks A.1 Basic requirements basic requirements CC/PP trust management framework, were discussed version document, are listed below. client be able discover privacy practices origin server before revealing private profile information privacy mechanism be separable CC/PP framework so user choice not privacy mechanism be used. other words, enable CC/PP content negotiation privacy protocol allow client individually determine information private profile be considered private. be private piece information user not be so CC/PP protocol independent, privacy mechanism also be supported various transport protocols HTTP, MIME, SMTP etc) client be able interact server point discovering privacy policy having disclose particular item information. example, user agent first non-private profile data server, then privacy policy, as result user agent either choose send not send additional information server purposes receiving tailored content. be possible origin server render content best effort, private information not shared user. Intermediate proxies, servers gateways asserting profile data also honor privacy needs user. other words, user profile attribute be private, intermediate proxy not disclose attribute profile diff. May require user-agent side privacy capability P3P user agents) be supported such servers/ proxies/ gateways. CC/PP mechanism, private profile also support. additions other network elements as specified CC/PP specs inline URI references profile information privacy mechanism support split client model. Thin clients such as low-end devices mobile network example), not be able support necessary mechanism privacy P3P user agent) perhaps due overhead. Such function be enabled gateway proxy acts behalf thin client. scope work?] requirements relative P3P policy asserted servers be XML RDF formats? privacy mechanism be independent separable security mechanisms. other words, be possible transmit private CC/PP profile information security. combined system capability profiles privacy practice declarations work presence information caches leaking private information parties have not agreed treat properly. A.2 P3P requirements trust mechanism analysis proposed use P3P fulfill basic requirements CC/PP trust management framework client be able discover privacy practices origin server before revealing private profile information Fulfilled, provided private information transmitted.. privacy mechanism be separable CC/PP framework so user choice not privacy mechanism be used. other words, enable CC/PP content negotiation privacy Protocol dependent. Not possible examples given. protocol allow client individually determine information private profile be considered private. be private piece information user not be so Fulfilled, provided APPEL, similar rules language, proprietary solution device, be applied profile construction various profiles be selected). I.e. not version. CC/PP protocol independent, privacy mechanism also be supported various transport protocols HTTP, MIME, SMTP etc) Not fulfilled be used other protocols HTTP, as noted specification, not been specified). client be able interact server point discovering privacy policy having disclose particular item information. example, user agent first non-private profile data empty profile) server, then privacy policy, as result user agent either choose send not send additional information server purposes receiving tailored content. Fulfilled. be possible origin server render content best effort, private information not shared user. Fulfilled Intermediate proxies, servers gateways asserting profile data also honor privacy needs user. other words, user profile attribute be private, intermediate proxy not disclose attribute profile diff. Fulfilled, method above used.. May require user-agent side privacy capability P3P user agents) be supported such servers/ proxies/ gateways. Fulfilled actually strange requirement) CC/PP mechanism, private profile also support. additions other network elements as specified CC/PP specs inline URI references profile information Not fulfilled. privacy mechanism support split client model. Thin clients such as low-end devices mobile network example), not be able support necessary mechanism privacy P3P user agent) perhaps due overhead. Such function be enabled gateway proxy acts behalf thin client. scope work?] Fulfilled? sure) requirements relative P3P policy asserted servers be XML RDF formats? Not sure requirement means. privacy mechanism be independent separable security mechanisms. other words, be possible transmit private CC/PP profile information security. Fulfilled. combined system capability profiles privacy practice declarations work presence information caches leaking private information parties have not agreed treat properly. Not fulfilled proxies still be transparent). 